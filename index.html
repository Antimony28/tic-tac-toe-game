<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap By SKILLHUB</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body{
        background-color: darkslategray;
    }
    .box{
        height: 200px;
        width: 100%;
        border: 2px solid black;
        margin-top: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
    }
</style>  
</head>
  <body>
      <!-- .container>.row>.col-sm-6.offset-sm-3>.card>.card-body>input.form-control*2+button.btn.btn-primary.w-100>{Start Game} -->
      <div class="container my-5" id="playerCard">
        <div id="alert"></div>
        <div class="row">
            <div class="col-sm-6 offset-sm-3">
                <!-- <div class="outputTwo"></div> -->
                <div class="card">
                    <div class="card-header">Enter Your Names</div>
                    <div class="card-body">
                        <input type="text" class="form-control" placeholder="Enter Name" id="p1"><br>
                        <input type="text" class="form-control" placeholder="Enter Name" id="p2"><br>
                        <button class="btn btn-primary w-100" id="changeButton" onclick="startGame()">Start Game</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container my-5 d-none" id="gameBlock">
        <img class="offset-sm-5" src="" id="imageHere">
        <div id="output"></div>
        <div class="row">
            <div class="col-sm-10 offset-sm-1 card mt-1">
                <div class="card-header text-center"><h1>Tic Tac Toe</h1></div>
                <div class="card-body">
                    <!-- .row>.col-sm-3*4>.card>.card-body>d-flex.justify-content-between>h6+strong -->
                    <div class="row">
                        <div class="col-sm-3">
                            <div class="card">
                                <div class="card-body d-flex justify-content-between">
                                    
                                        <h6 id="player1">player1</h6>
                                        <strong id="player1WinCount">0</strong>
                                    
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="card">
                                <div class="card-body d-flex justify-content-between">
                                        <h6 id="player2">player2</h6>
                                        <strong id="player2WinCount">0</strong>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="card">
                                <div class="card-body d-flex justify-content-between">
                                        <h6>Draw</h6>
                                        <strong id="drawCount">0</strong>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="card">
                                <div class="card-body d-flex justify-content-between">
                                        <h6>Total</h6>
                                        <strong id="totalCount">0</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- .row>.col-4*9>.box>{$} -->
                    <div class="row">
                        <div class="col-4">
                            <div class="box" id="b1" onclick="game('b1')">1</div>
                        </div>
                        <div class="col-4">
                            <div class="box" id="b2" onclick="game('b2')">2</div>
                        </div>
                        <div class="col-4">
                            <div class="box" id="b3" onclick="game('b3')">3</div>
                        </div>
                        <div class="col-4">
                            <div class="box" id="b4" onclick="game('b4')">4</div>
                        </div>
                        <div class="col-4">
                            <div class="box" id="b5" onclick="game('b5')">5</div>
                        </div>
                        <div class="col-4">
                            <div class="box" id="b6" onclick="game('b6')">6</div>
                        </div>
                        <div class="col-4" >
                            <div class="box" id="b7" onclick="game('b7')">7</div>
                        </div>
                        <div class="col-4">
                            <div class="box" id="b8" onclick="game('b8')">8</div>
                        </div>
                        <div class="col-4">
                            <div class="box" id="b9" onclick="game('b9')">9</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" ></script>
    
    <script>
        const gameBlock= document.getElementById("gameBlock")
        const playerCard= document.getElementById("playerCard")

        const player1WinCount = document.getElementById("player1WinCount") 
        const player2WinCount = document.getElementById("player2WinCount")
        const drawCount = document.getElementById("drawCount")
        const totalCount = document.getElementById("totalCount")

        let p1Count =0, p2Count =0, dCount=0, tCount = 0
        
        function startGame(){

            // console.log(gayab);
            
            player1Name = document.getElementById("p1").value
            player2Name =document.getElementById("p2").value
            if(player1Name === "" || player2Name === ""){
                document.getElementById("changeButton").innerHTML="Names Required"
                document.getElementById("alert").innerHTML=`<div class="alert alert-danger">Please Enter Names</div>`
                setTimeout(() =>{
                    document.getElementById("alert").innerHTML=""
                },2000)
                // console.log("name required");
                
            }else{
                playerCard.classList.add("d-none")
                gameBlock.classList.remove("d-none")
            }
            // console.log(player1Name,player2Name);
            document.getElementById("player1").innerHTML=player1Name
            document.getElementById("player2").innerHTML=player2Name

            // const playerName1 = document.getElementById("playerName1").value
            // console.log(playerName1);
        }



        let chance="p1"
        function game(id) {

            const box = document.getElementById(id)
            
            const isRed = box.classList.contains("bg-danger")
            const isGreen = box.classList.contains("bg-success")
            if(!isRed && !isGreen){

                if(chance=== "p1"){
                    
                    box.classList.add("bg-danger")
                    box.innerHTML=`<h1>X</h1>`
                    chance = "p2"
                }else{
                    
                    box.classList.add("bg-success")
                    box.innerHTML=`<h1>O</h1>`
                    chance = "p1"
                }
                
            }
            if(!winner() && checkAllFill()){
                console.log("match draw");
                dCount++
                setTimeout(function(){
                    resetGame()
                },2000)
            }
        }

        function winner(){
            // const isBox1Red = document.getElementById("b1").classList.contains("bg-danger")
            // const isBox2Red = document.getElementById("b2").classList.contains("bg-danger")
            // const isBox3Red = document.getElementById("b3").classList.contains("bg-danger")
            // if(isBox1Red && isBox2Red && isBox3Red){
            //     console.log("ðŸŽ‰ Red is Winner");
            //     document.write("ðŸŽ‰ Red is Winner")
            return(

                checkWinner("b1", "b2", "b3","bg-danger")||
                checkWinner("b1", "b2", "b3","bg-success")||
                checkWinner("b4", "b5", "b6","bg-danger")||
                checkWinner("b4", "b5", "b6","bg-success") ||
                checkWinner("b7", "b8", "b9","bg-danger")||
                checkWinner("b7", "b8", "b9","bg-success")||
                checkWinner("b1", "b4", "b7","bg-danger")||
                checkWinner("b1", "b4", "b7","bg-success")||
                checkWinner("b2", "b5", "b8","bg-danger")||
                checkWinner("b2", "b5", "b8","bg-success")||
                checkWinner("b3", "b6", "b9","bg-danger")||
                checkWinner("b3", "b6", "b9","bg-success")||
                checkWinner("b1", "b5", "b9","bg-danger")||
                checkWinner("b1", "b5", "b9","bg-success")||       
                checkWinner("b3", "b5", "b7","bg-danger")||
                checkWinner("b3", "b5", "b7","bg-success")
            
            
            )
            
        }
        
            // let countP1 = 0
            // let countP2 = 0
            function checkWinner(id1, id2, id3, color){
            const isBox1 = document.getElementById(id1).classList.contains(color)
            const isBox2 = document.getElementById(id2).classList.contains(color)
            const isBox3 = document.getElementById(id3).classList.contains(color)

            if(isBox1 && isBox2 && isBox3){

                console.log(`ðŸŽ‰ ${color} is Winner`);
                document.getElementById("output").innerHTML = `<div class="alert alert-success">${color==="bg-danger" ? player1Name : player2Name} is Winner</div>`
                
                setTimeout(function (){document.getElementById("output").innerHTML = ""}, 3000)
                setTimeout(function(){
                    resetGame()
                },3000)
                color === "bg-danger" ? p1Count++ : p2Count++
                stat()
                const image= document.getElementById("imageHere")
                image.setAttribute("src","https://media.giphy.com/media/2RGhmKXcl0ViM/giphy.gif")
                // setTimeout(function(){
                //     resetGif()
                // },3000)

                setTimeout(() =>{
                    image.setAttribute("src","")
                },3000)
                console.log(image);
                // console.log(image);
                return true
            }
            return false
            }
            // function resetGif(){
            //     image.setAttribute("src","none")
                
            // }
            document.getElementById("alert").innerHTML=`<div class="alert alert-danger">Please Enter Names</div>`
                setTimeout(() =>{
                    document.getElementById("alert").innerHTML=""
                },2000)

            function resetGame(){
                for(let i = 1; i <= 9; i++){
                   
                    document.getElementById(`b${i}`).innerHTML = i

                    document.getElementById(`b${i}`).classList.remove("bg-success")
                    document.getElementById(`b${i}`).classList.remove("bg-danger")
                }
                tCount++
                console.log(tCount);
                stat()
            }
            function checkAllFill(){
                let boxCount = 0;
                for (let i = 1; i <=9; i++) {
                    const isRed = document.getElementById(`b${i}`).classList.contains("bg-danger")                    
                    const isGreen = document.getElementById(`b${i}`).classList.contains("bg-success")
                    if ( isRed || isGreen) {
                        boxCount++
                        
                    }             
                }
                return boxCount === 9 ? true : false;       
            }
           
            function stat() {

                totalCount.innerHTML = tCount
                drawCount.innerHTML = dCount
                player1WinCount.innerHTML = p1Count
                player2WinCount.innerHTML = p2Count
                
            }
    </script>

  </body>
</html>